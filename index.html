<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <!-- Favicon & Manifest -->
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon" href="/favicon.png" />
    <link rel="manifest" href="/manifest.json" />
    <!-- Basic SEO -->
    <title>$ongChainn — Audience-First Music Streaming</title>
    <meta name="description" content="$ongChainn — Audience-first music streaming experience on Base & Farcaster. Discover, stream, and connect with artists." />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#8B5CF6" />
    <meta name="application-name" content="$ongChainn" />

    <!-- Farcaster Frame (Mini App) -->
    <meta property="fc:frame" content="vNext" />
    <meta property="fc:frame:image" content="https://app.songchainn.xyz/frame.png" />
    <meta property="fc:frame:button:1" content="Open $ongChainn" />
    <meta property="fc:frame:button:1:action" content="link" />
    <meta property="fc:frame:button:1:target" content="https://app.songchainn.xyz" />

    <!-- Open Graph (Sharing Preview) -->
    <meta property="og:title" content="$ongChainn — Audience-First Music Streaming" />
    <meta property="og:description" content="Audience-first music streaming on Base & Farcaster. Discover, stream, and connect with artists." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://app.songchainn.xyz/og.png" />
    <meta property="og:url" content="https://app.songchainn.xyz" />
    <meta property="og:site_name" content="$ongChainn" />

    <!-- Twitter / X -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="$ongChainn — Audience-First Music Streaming" />
    <meta name="twitter:description" content="Audience-first music streaming on Base & Farcaster. Discover, stream, and connect with artists." />
    <meta name="twitter:image" content="https://app.songchainn.xyz/og.png" />
    <meta name="twitter:site" content="@SongChainn" />

    <script>
      (function () {
        var isDevHost =
          location.hostname === "localhost" ||
          location.hostname === "127.0.0.1" ||
          location.hostname === "0.0.0.0" ||
          location.port === "5173";
        if (!isDevHost) return;
        if (!("serviceWorker" in navigator)) return;
        var key = "songchainn_dev_sw_reset_done";
        var state = sessionStorage.getItem(key);
        if (state === "done") return;

        if (state !== "pending" && navigator.serviceWorker.controller) {
          sessionStorage.setItem(key, "pending");
          location.reload();
          return;
        }

        Promise.all([
          navigator.serviceWorker.getRegistrations().then(function (regs) {
            if (!regs.length) return false;
            return Promise.all(regs.map(function (r) { return r.unregister(); })).then(function () { return true; });
          }),
          caches.keys().then(function (keys) {
            if (!keys.length) return false;
            return Promise.all(keys.map(function (k) { return caches.delete(k); })).then(function () { return true; });
          })
        ]).finally(function () {
          sessionStorage.setItem(key, "done");
        });
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
